(function(t){function e(e){for(var s,o,l=e[0],n=e[1],c=e[2],d=0,p=[];d<l.length;d++)o=l[d],r[o]&&p.push(r[o][0]),r[o]=0;for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,l=1;l<a.length;l++){var n=a[l];0!==r[n]&&(s=!1)}s&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},r={1:0},i=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],n=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=n;i.push([18,0]),a()})({"/LXg":function(t,e,a){"use strict";var s=a("U/y4"),r=a.n(s);r.a},18:function(t,e,a){t.exports=a("Vtdi")},"26gG":function(t,e,a){"use strict";var s=a("BBle"),r=a.n(s);r.a},"66K1":function(t,e,a){},"6brR":function(t,e,a){},"6mT4":function(t,e,a){},BBle:function(t,e,a){},BPTm:function(t,e,a){"use strict";var s=a("vbe9"),r=a.n(s);r.a},DW56:function(t,e,a){"use strict";var s=a("qfvz"),r=a.n(s);r.a},EDI0:function(t,e,a){},GC3I:function(t,e,a){},HLeD:function(t,e,a){},IZBv:function(t,e,a){"use strict";var s=a("z5KE"),r=a.n(s);r.a},PEzW:function(t,e,a){},PJ70:function(t,e,a){"use strict";var s=a("6brR"),r=a.n(s);r.a},Q8JM:function(t,e,a){},RwIf:function(t,e,a){"use strict";var s=a("Q8JM"),r=a.n(s);r.a},S9nF:function(t,e,a){"use strict";var s=a("HLeD"),r=a.n(s);r.a},"U/y4":function(t,e,a){},Vtdi:function(t,e,a){"use strict";a.r(e);a("VRzm");var s=a("Kw5r"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},i=[],o={},l=o,n=(a("ZL7j"),a("KHd+")),c=Object(n["a"])(l,r,i,!1,null,null,null),u=c.exports,d=a("jE9Z"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{background:"#eee","padding-top":"100px",height:"100vh"}},[a("Card",{staticClass:"login-box",attrs:{bordered:!1}},[a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"title"},slot:"title"},[t._v("登录教学管理系统")]),a("Form",{attrs:{"label-width":80}},[a("FormItem",{attrs:{label:"学号/工号"}},[a("Input",{model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1),a("FormItem",{attrs:{label:"密码"}},[a("Input",{attrs:{type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:t.doLogin}},[t._v("登录")])],1)],1)],1)],1)},h=[],f=(a("f3/d"),{data:function(){return{number:"1000",password:"password"}},methods:{doLogin:function(){var t=this;this.$axios.post("/api/auth/login",{email:this.number+"@ustb.edu.cn",password:this.password}).then(function(e){localStorage.setItem("token",e.data.access_token),t.$axios.defaults.headers.common["Authorization"]="Bearer"+localStorage.token,t.$router.push("workspace")}).catch(function(e){t.$Message.error("登录失败")})}},beforeCreate:function(){var t=this,e=localStorage.getItem("token");e&&""!=e&&this.$axios.post("/api/auth/me").then(function(e){e.data.name&&t.$router.push("workspace")}).catch(function(e){localStorage.removeItem("token"),t.$Message.error("登录已过期")})}}),v=f,m=(a("PJ70"),Object(n["a"])(v,p,h,!1,null,null,null)),_=m.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout",staticStyle:{height:"100vh","overflow-y":"scroll"}},[a("Layout",[a("Header",[a("Menu",{attrs:{mode:"horizontal",theme:"dark"}},[a("div",{staticClass:"layout-logo"},[a("span",[t._v("北京科技大学 - 教务管理")])]),a("div",{staticClass:"layout-nav"},[a("Dropdown",[a("a",{staticStyle:{color:"white"},attrs:{href:"javascript:void(0)"}},[a("Icon",{attrs:{type:"person"}}),t._v("\n                              "+t._s(t.currentUser.name)+"\n                            "),a("Icon",{attrs:{type:"arrow-down-b"}})],1),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{nativeOn:{click:function(e){return t.logout(e)}}},[t._v("注销")])],1)],1)],1)])],1),a("Layout",[a("Sider",{style:{background:"#fff",height:"100vh"},attrs:{"hide-trigger":""}},[a("Menu",{attrs:{theme:"light",width:"auto"}},[3===t.currentUser.role?a("Submenu",{attrs:{name:"1"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"ios-navigate"}}),t._v("\n                            自动排课\n                        ")],1),a("router-link",{attrs:{to:"/workspace/view-course"}},[a("MenuItem",{attrs:{name:"1-0"}},[t._v("查看课表")])],1)],2):t._e(),a("Submenu",{attrs:{name:"2"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"ios-keypad"}}),t._v("\n                            SRTP 管理\n                        ")],1),1===t.currentUser.role?a("router-link",{attrs:{to:"/workspace/srtp-apply"}},[a("MenuItem",{attrs:{name:"2-1"}},[t._v("我的项目")])],1):t._e(),3===t.currentUser.role?a("router-link",{attrs:{to:"/workspace/srtp-list"}},[a("MenuItem",{attrs:{name:"2-2"}},[t._v("所有项目")])],1):t._e()],2),1!=t.currentUser.role?a("Submenu",{attrs:{name:"3"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"ios-analytics"}}),t._v("\n                            教改项目\n                        ")],1),2===t.currentUser.role?a("router-link",{attrs:{to:"/workspace/teach-apply"}},[a("MenuItem",{attrs:{name:"3-1"}},[t._v("项目申请")])],1):t._e(),2===t.currentUser.role?a("router-link",{attrs:{to:"/workspace/my-teach-list"}},[a("MenuItem",{attrs:{name:"3-2"}},[t._v("我的项目")])],1):t._e(),3===t.currentUser.role?a("router-link",{attrs:{to:"/workspace/all-teach-list"}},[a("MenuItem",{attrs:{name:"3-3"}},[t._v("所有教改项目")])],1):t._e()],2):t._e(),3!=t.currentUser.role?a("Submenu",{attrs:{name:"4"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"briefcase"}}),t._v("\n                            毕业设计\n                        ")],1),1===t.currentUser.role?a("router-link",{attrs:{to:"/workspace/graduation-manage"}},[a("MenuItem",{attrs:{name:"4-1"}},[t._v("我的毕设")])],1):t._e(),2===t.currentUser.role?a("router-link",{attrs:{to:"/workspace/graduation-list"}},[a("MenuItem",{attrs:{name:"4-2"}},[t._v("我的项目")])],1):t._e()],2):t._e()],1)],1),a("Layout",{style:{padding:"24px"}},[a("Content",{style:{padding:"24px",minHeight:"280px",background:"#fff"}},[a("router-view")],1)],1)],1)],1)],1)},g=[],k={data:function(){return{currentUser:{name:"",email:"",role:0}}},methods:{logout:function(){localStorage.removeItem("token"),this.$router.push("/login")}},beforeCreate:function(){var t=this,e=localStorage.getItem("token");e&&""!=e?this.$axios.post("/api/auth/me").then(function(e){e.data.name&&(t.currentUser.name=e.data.name,t.currentUser.email=e.data.email,t.currentUser.role=e.data.role)}).catch(function(e){localStorage.removeItem("token"),t.$router.push("/login")}):this.$router.push("/login")}},w=k,y=(a("ZjHd"),Object(n["a"])(w,b,g,!1,null,"2ff68044",null)),F=y.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("请选择从左边菜单选择")])},M=[],x={},I=x,T=(a("26gG"),Object(n["a"])(I,$,M,!1,null,null,null)),L=T.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("排课结果")]),a("Select",{staticStyle:{width:"120px"},model:{value:t.selectType,callback:function(e){t.selectType=e},expression:"selectType"}},t._l(t.typeList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),a("Select",{staticStyle:{width:"100px"},model:{value:t.selectedTeacher,callback:function(e){t.selectedTeacher=e},expression:"selectedTeacher"}},t._l(t.teacherList,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),a("Select",{staticStyle:{width:"150px"},model:{value:t.selectedClassroom,callback:function(e){t.selectedClassroom=e},expression:"selectedClassroom"}},t._l(t.classroomList,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),a("Select",{staticStyle:{width:"150px"},model:{value:t.selectedClass,callback:function(e){t.selectedClass=e},expression:"selectedClass"}},t._l(t.classList,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),a("Button",{attrs:{type:"default"},on:{click:t.fetchTableData}},[t._v("查看")]),a("Table",{attrs:{border:"",columns:t.col,data:t.awesomeCourseList,loading:t.isLoading}}),a("br"),a("br"),a("Button",{attrs:{type:"primary",loading:t.isSubmitButtonLoading},on:{click:t.doArrange}},[t._v("一键排课")])],1)},R=[],D=(a("rGqo"),{data:function(){return{col:[{title:"节数",key:"class",width:120,fixed:"left"},{title:"周一",key:"mon",width:200},{title:"周二",key:"two",width:200},{title:"周三",key:"wed",width:200},{title:"周四",key:"thu",width:200},{title:"周五",key:"fri",width:200}],course:Object,awesomeCourseList:[{class:"1 (8:00-9:35)",mon:"",two:"",wed:"",thu:"",fri:""},{class:"2 (9:55-11:30)",mon:"",two:"",wed:"",thu:"",fri:""},{class:"3 (13:30-15:05)",mon:"",two:"",wed:"",thu:"",fri:""},{class:"4 (15:20-16:55)",mon:"",two:"",wed:"",thu:"",fri:""},{class:"5 (17:10-18:45)",mon:"",two:"",wed:"",thu:"",fri:""}],isLoading:!1,isSubmitButtonLoading:!1,selectType:0,typeList:[{value:0,label:"按教师显示"},{value:1,label:"按教室显示"},{value:2,label:"按班级显示"}],selectedTeacher:1,teacherList:[],selectedClassroom:1,classroomList:[],selectedClass:1,classList:[]}},methods:{clearCourseList:function(){this.awesomeCourseList=[{class:"1 (8:00-9:35)",mon:"",two:"",wed:"",thu:"",fri:""},{class:"2 (9:55-11:30)",mon:"",two:"",wed:"",thu:"",fri:""},{class:"3 (13:30-15:05)",mon:"",two:"",wed:"",thu:"",fri:""},{class:"4 (15:20-16:55)",mon:"",two:"",wed:"",thu:"",fri:""},{class:"5 (17:10-18:45)",mon:"",two:"",wed:"",thu:"",fri:""}]},addCourseToList:function(t,e,a){var s="";switch(t){case 0:s="mon";break;case 1:s="two";break;case 2:s="wed";break;case 3:s="thu";break;case 4:s="fri";break;default:break}this.awesomeCourseList[e][s]=a},fetchTableData:function(){var t=this,e="",a=new FormData;0===this.selectType?(e="/course/timetable/teacher/",a.append("tid",this.selectedTeacher)):1===this.selectType?(e="/course/timetable/classroom/",a.append("rid",this.selectedClassroom)):2===this.selectType&&(e="/course/timetable/class/",a.append("cid",this.selectedClass)),this.clearCourseList(),this.isLoading=!0,this.$axios.post(e,a).then(function(e){t.course=e.data.data,t.course.forEach(function(e){var a=e.course.full_name+"("+e.course.teacher+")("+e.course.week_str+")";t.addCourseToList(e.day,e.slot,a)}),t.isLoading=!1})},doArrange:function(){var t=this;this.isSubmitButtonLoading=!0,this.clearCourseList();var e=new FormData;e.append("week",4),e.append("day",5),e.append("slot",5),this.$axios.post("/course/assignment/execute/",e).then(function(e){t.isSubmitButtonLoading=!1,t.$Message.success("排课成功，请重新选择选项查看课表")}).catch(function(e){t.isSubmitButtonLoading=!1,t.$Message.error("排课失败")})}},beforeMount:function(){var t=this;this.$axios.get("/course/list/class/").then(function(e){t.classList=e.data.data,t.selectedClass=t.classList[0].id}),this.$axios.get("/course/list/classroom/").then(function(e){t.classroomList=e.data.data,t.selectedClassroom=t.classroomList[0].id}),this.$axios.get("/course/list/teacher/").then(function(e){t.teacherList=e.data.data,t.selectedTeacher=t.teacherList[0].id}),this.isLoading=!0;var e=new FormData;e.append("tid",2),this.$axios.post("/course/timetable/teacher/",e).then(function(e){t.course=e.data.data,t.course.forEach(function(e){var a=e.course.full_name+"("+e.course.teacher+")("+e.course.week_str+")("+e.classroom_name+")";t.addCourseToList(e.day,e.slot,a)}),t.isLoading=!1})}}),S=D,O=(a("RwIf"),Object(n["a"])(S,C,R,!1,null,null,null)),E=O.exports,B=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},U=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("自动排课")])])}],j={},z=j,P=(a("S9nF"),Object(n["a"])(z,B,U,!1,null,null,null)),A=(P.exports,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("SRTP 项目提交")]),t.hasProject?a("div",[a("p",[t._v("您已创建过SRTP项目")]),a("router-link",{attrs:{to:"/workspace/srtp-detail"}},[a("Button",[t._v("点击查看我的项目")])],1)],1):a("Form",{attrs:{"label-width":80}},[a("FormItem",{attrs:{label:"项目标题"}},[a("Input",{model:{value:t.srtpTitle,callback:function(e){t.srtpTitle=e},expression:"srtpTitle"}})],1),a("FormItem",{attrs:{label:"项目年度"}},[a("DatePicker",{attrs:{type:"year",placeholder:"选择年份"},model:{value:t.srtpYear,callback:function(e){t.srtpYear=e},expression:"srtpYear"}})],1),a("FormItem",{attrs:{label:"项目简介"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.srtpDesc,callback:function(e){t.srtpDesc=e},expression:"srtpDesc"}})],1),a("FormItem",{attrs:{label:"项目级别"}},[a("RadioGroup",{model:{value:t.srtpLevel,callback:function(e){t.srtpLevel=e},expression:"srtpLevel"}},[a("Radio",{attrs:{label:"1"}},[t._v("院级")]),a("Radio",{attrs:{label:"2"}},[t._v("推荐校级")]),a("Radio",{attrs:{label:"3"}},[t._v("推荐市级")])],1)],1),a("FormItem",{attrs:{label:"指导老师"}},[a("Select",{attrs:{filterable:""},model:{value:t.srtpTeacher,callback:function(e){t.srtpTeacher=e},expression:"srtpTeacher"}},t._l(t.teacherList,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),a("FormItem",{attrs:{label:"所有成员"}},[a("Input",{model:{value:t.srtpMembers,callback:function(e){t.srtpMembers=e},expression:"srtpMembers"}})],1),a("FormItem",{attrs:{lable:"上传详细申请表"}},[a("Upload",{ref:"upload",attrs:{action:"/api/upload","on-success":t.finishUpload,"before-upload":t.beforeUpload,"on-remove":t.removeUpload,headers:t.tokenHeader}},[a("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[t._v("上传详细申请表")])],1)],1),a("FormItem",[a("Button",{attrs:{type:"primary",loading:t.postLoading},on:{click:t.submitApply}},[t._v("提交申请")])],1)],1)],1)}),Y=[],K=(a("yt8O"),a("RW0V"),{data:function(){return{srtpTitle:"",srtpYear:"",srtpStartTime:"",srtpLatestTime:"",srtpDesc:"",srtpLevel:"1",srtpTeacher:null,srtpMembers:"",srtpApplyFile:"",srtpApplyFileName:"",uploadedFiles:[],teacherList:[],postLoading:!1,hasProject:!1}},computed:{tokenHeader:function(){return{Authorization:"Bearer"+localStorage.token}}},methods:{submitApply:function(t){var e=this,a=""!=this.srtpTitle&&""!=this.srtpYear&&""!=this.srtpDesc&&""!=this.srtpLevel&&""!=this.srtpLevel&&""!=this.srtpTeacher&&""!=this.srtpApplyFile;a?(this.postLoading=!0,this.$axios.post("/api/student/srtp",{title:this.srtpTitle,level:this.srtpLevel,year:this.srtpYear.getFullYear(),teacher:this.srtpTeacher,description:this.srtpDesc,members:this.srtpMembers,apply_file:this.srtpApplyFile}).then(function(t){e.postLoading=!1,"OK"==t.data.status?(e.$Message.success("提交申请成功！"),e.$router.push("/workspace/srtp-detail")):e.$Message.error(t.data.msg)}).catch(function(t){e.postLoading=!1,e.$Message.error("请求出错")})):this.$Message.error("请填写完整!")},beforeUpload:function(){this.$refs.upload.clearFiles()},finishUpload:function(t,e){this.srtpApplyFile=t.path,this.srtpApplyFileName=e.name},removeUpload:function(){this.srtpApplyFile="",this.srtpApplyFileName=""}},beforeMount:function(){var t=this;this.$axios.get("/api/student/srtp").then(function(e){0!=Object.keys(e.data).length&&(t.hasProject=!0)}),this.$axios.get("/api/teachers").then(function(e){t.teacherList=e.data})}}),G=K,q=(a("zVQ9"),Object(n["a"])(G,A,Y,!1,null,null,null)),H=q.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Table",{attrs:{border:"",columns:t.col,data:t.list}})},J=[],V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",{staticClass:"expand-row"},[a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[a("b",[t._v("指导老师:")])]),a("span",{staticClass:"expand-value"},[t._v(t._s(t.row.teacher))])]),a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[a("b",[t._v("成员:")])]),a("span",{staticClass:"expand-value"},[t._v(t._s(t.row.members))])]),a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"expand-key"},[a("b",[t._v("简介:")])]),a("span",{staticClass:"expand-value"},[t._v(t._s(t.row.description))])])],1),a("Row",[1==t.row.status?a("div",[a("h4",[t._v("申请审核中：")]),a("p",[t._v("申请材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.apply_file))])]),a("Form",[a("FormItem",{attrs:{label:"更改项目级别"}},[a("RadioGroup",{model:{value:t.updateSrtpLevel,callback:function(e){t.updateSrtpLevel=e},expression:"updateSrtpLevel"}},[a("Radio",{attrs:{label:"1"}},[t._v("院级")]),a("Radio",{attrs:{label:"2"}},[t._v("市级")]),a("Radio",{attrs:{label:"3"}},[t._v("国家级")])],1)],1),a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.processRequest(201)}}},[t._v("通过创建申请")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){t.processRequest(204)}}},[t._v("驳回申请")])],1)],1):t._e(),2==t.row.status?a("div",[a("h4",[t._v("前期进行中：")]),a("p",[t._v("申请材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.apply_file))])])]):t._e(),3==t.row.status?a("div",[a("h4",[t._v("中期审核中：")]),a("p",[t._v("申请材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.apply_file))])]),a("p",[t._v("中期材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.middle_file))])]),a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.processRequest(202)}}},[t._v("通过中期审核")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){t.processRequest(204)}}},[t._v("驳回中期审核")])],1):t._e(),4==t.row.status?a("div",[a("h4",[t._v("后期进行中：")]),a("p",[t._v("申请材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.apply_file))])]),a("p",[t._v("中期材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.middle_file))])])]):t._e(),5==t.row.status?a("div",[a("h4",[t._v("延期进行中：")]),a("p",[t._v("申请材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.apply_file))])]),a("p",[t._v("中期材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.middle_file))])])]):t._e(),6==t.row.status?a("div",[a("h4",[t._v("结题审核中：")]),a("p",[t._v("申请材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.apply_file))])]),a("p",[t._v("中期材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.middle_file))])]),a("p",[t._v("结题材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.end_file))])]),a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.processRequest(203)}}},[t._v("通过结题")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){t.processRequest(204)}}},[t._v("驳回结题")])],1):t._e(),7==t.row.status?a("div",[a("h4",[t._v("已结题：")]),a("p",[t._v("结题材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.end_file))])])]):t._e(),8==t.row.status?a("div",[a("h4",[t._v("已终止：")]),""!=t.row.abort_file?a("p",[t._v("终止材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.abort_file))])]):t._e()]):t._e()])],1)},W=[],Q=(a("Z2Ku"),{props:{row:Object},data:function(){return{updateSrtpLevel:this.row.level+""}},methods:{processRequest:function(t){var e=this,a=[201,202,203,204];if(!a.includes(t))return this.$Message.error("非法操作"),!1;this.$axios.patch("/api/assistant/srtp/"+this.row.id+"/update",{operation:t,new_level:this.updateSrtpLevel}).then(function(t){"OK"==t.data.status?e.$Message.success("操作成功"):e.$Message.error("操作失败"),e.$emit("processed")}).catch(function(t){e.$Message.error("操作出错")})}}}),N=Q,X=(a("wP6D"),Object(n["a"])(N,V,W,!1,null,"72e9e403",null)),tt=X.exports,et={data:function(){var t=this;return{col:[{type:"expand",width:50,render:function(e,a){return e(tt,{props:{row:a.row},on:{processed:t.fetchTableData}})}},{title:"项目名",key:"title"},{title:"年度",key:"year",width:100,filters:[{label:"2018",value:2018},{label:"2017",value:2017},{label:"2016",value:2016},{label:"2015及以前",value:0}],filterMultiple:!1,filterMethod:function(t,e){return 0===t?e.year<=2015:e.year===t}},{title:"负责人",key:"leader"},{title:"级别",key:"level",width:100,render:function(t,e){var a;switch(e.row.level){case 1:a="院级";break;case 2:a="市级";break;case 3:a="国家级";break;default:break}return t("strong",a)},filters:[{label:"院级",value:1},{label:"市级",value:2},{label:"国家级",value:3}],filterMultiple:!1,filterMethod:function(t,e){return e.level===t}},{title:"状态",key:"status",filters:[{label:"申请审核中",value:1},{label:"前期进行中",value:2},{label:"中期审核中",value:3},{label:"后期进行中",value:4},{label:"延期进行中",value:5},{label:"结题审核中",value:6},{label:"已结题",value:7},{label:"已终止",value:8}],render:function(t,e){var a;switch(e.row.status){case 1:a="申请审核中";break;case 2:a="前期进行中";break;case 3:a="中期审核中";break;case 4:a="后期进行中";break;case 5:a="延期进行中";break;case 6:a="结题审核中";break;case 7:a="已结题";break;case 8:a="已终止";break;default:break}return t("span",a)},filterMultiple:!1,filterMethod:function(t,e){return e.status===t}}],list:[]}},methods:{fetchTableData:function(){var t=this;this.$axios.get("/api/assistant/srtp").then(function(e){t.list=e.data})}},beforeMount:function(){this.fetchTableData()}},at=et,st=Object(n["a"])(at,Z,J,!1,null,null,null),rt=st.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("SRTP 项目管理")]),a("Timeline",[a("TimelineItem",[a("p",{staticClass:"time"},[t._v("项目基本信息")]),a("div",{staticClass:"content"},[a("p",[a("b",[t._v("SRTP 题目：")]),t._v(t._s(t.srtp.title))]),a("p",[a("b",[t._v("简介：")]),t._v(t._s(t.srtp.description))]),a("p",[a("b",[t._v("年度：")]),t._v(t._s(t.srtp.year))]),a("p",[a("b",[t._v("级别：")]),t._v(t._s(t.srtpLevel))]),a("p",[a("b",[t._v("负责人：")]),t._v(t._s(t.srtp.leader_id))]),a("p",[a("b",[t._v("成员：")]),t._v(t._s(t.srtp.members))]),a("p",[a("b",[t._v("指导教师：")]),t._v(t._s(t.srtp.teacher_id))]),a("p",[a("b",[t._v("当前进度：")]),a("Tag",{attrs:{color:"green"}},[t._v(t._s(t.srtpStatus))])],1)])]),a("TimelineItem",[a("p",{staticClass:"time"},[t._v("申请管理")]),a("div",{staticClass:"content"},[""!=t.srtp.apply_file?a("p",[t._v("已上传：\n                    "),a("a",{attrs:{href:""}},[t._v(t._s(t.srtp.apply_file))])]):t._e()])]),a("TimelineItem",[a("p",{staticClass:"time"},[t._v("中期管理")]),a("div",{staticClass:"content"},[""!=t.srtp.middle_file?a("p",[t._v("已上传：\n                    "),a("a",{attrs:{href:""}},[t._v(t._s(t.srtp.middle_file))])]):t._e(),t.srtp.status<3?a("Form",[a("FormItem",[a("RadioGroup",{model:{value:t.opMiddle,callback:function(e){t.opMiddle=e},expression:"opMiddle"}},[a("Radio",{attrs:{label:"101"}},[t._v("提交中期报告")]),a("Radio",{attrs:{label:"102"}},[t._v("提交终止申请")])],1)],1),a("FormItem",[a("UploadFile",{attrs:{buttonTitle:"上传相应材料"},model:{value:t.middleFile,callback:function(e){t.middleFile=e},expression:"middleFile"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:t.submitMiddle}},[t._v("提交")])],1)],1):t._e()],1)]),a("TimelineItem",[a("p",{staticClass:"time"},[t._v("结题管理")]),a("div",{staticClass:"content"},[""!=t.srtp.end_file?a("p",[t._v("已上传：\n                    "),a("a",{attrs:{href:""}},[t._v(t._s(t.srtp.end_file))])]):t._e(),4==t.srtp.status||5==t.srtp.status?a("Form",[a("FormItem",[a("RadioGroup",{model:{value:t.opEnd,callback:function(e){t.opEnd=e},expression:"opEnd"}},[a("Radio",{attrs:{label:"104"}},[t._v("提交结题材料")]),5!=t.srtp.status?a("Radio",{attrs:{label:"103"}},[t._v("提交延期申请")]):t._e(),a("Radio",{attrs:{label:"102"}},[t._v("提交终止申请")])],1)],1),a("FormItem",[a("UploadFile",{attrs:{buttonTitle:"上传相应材料"},model:{value:t.endFile,callback:function(e){t.endFile=e},expression:"endFile"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:t.submitEnd}},[t._v("提交")])],1)],1):t._e()],1)])],1)],1)},ot=[],lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Upload",{ref:"upload",attrs:{action:"/api/upload","on-success":t.finishUpload,"before-upload":t.beforeUpload,"on-remove":t.removeUpload,headers:t.tokenHeader}},[a("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[t._v(t._s(t.title))])],1)},nt=[],ct={props:{buttonTitle:{default:"上传文件"},value:{default:""}},data:function(){return{title:this.buttonTitle}},computed:{tokenHeader:function(){return{Authorization:"Bearer"+localStorage.token}}},methods:{beforeUpload:function(){this.$refs.upload.clearFiles()},finishUpload:function(t,e){this.$emit("input",t.path)},removeUpload:function(){this.$emit("input","")}}},ut=ct,dt=(a("IZBv"),Object(n["a"])(ut,lt,nt,!1,null,null,null)),pt=dt.exports,ht={components:{UploadFile:pt},data:function(){return{srtp:{title:"",description:"",year:"",level:1,status:"1"},opMiddle:"101",middleFile:"",opEnd:"104",endFile:""}},methods:{fetchData:function(){var t=this;this.$axios.get("/api/student/srtp").then(function(e){t.srtp=e.data}).catch(function(t){console.error(t)})},submitMiddle:function(){var t=this,e=""!=this.middleFile&&""!=this.opMiddle;e?this.$axios.patch("/api/student/srtp/update",{operation:parseInt(this.opMiddle),middle_file:this.middleFile}).then(function(e){"OK"==e.data.status?t.$Message.success("提交成功"):t.$Message.error("提交失败"),t.fetchData()}).catch(function(e){t.$Message.error("提交出错")}):this.$Message.error("提交内容不能为空")},submitEnd:function(){var t=this,e=""!=this.endFile&&""!=this.opEnd;e?this.$axios.patch("/api/student/srtp/update",{operation:parseInt(this.opEnd),end_file:this.endFile}).then(function(e){"OK"==e.data.status?t.$Message.success("提交成功"):t.$Message.error("提交失败"),t.fetchData()}).catch(function(e){t.$Message.error("提交出错")}):this.$Message.error("提交内容不能为空")}},computed:{srtpLevel:function(){return 1==this.srtp.level?"院级":2==this.srtp.level?"市级":"国家级"},srtpStatus:function(){var t="";switch(this.srtp.status){case 1:t="申请审核中";break;case 2:t="前期进行中";break;case 3:t="中期审核中";break;case 4:t="后期进行中";break;case 5:t="延期进行中";break;case 6:t="结题审核中";break;case 7:t="已结题";break;case 8:t="已终止";break;default:break}return t}},beforeMount:function(){this.fetchData()}},ft=ht,vt=(a("lqBx"),Object(n["a"])(ft,it,ot,!1,null,null,null)),mt=vt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("教改 项目申请")]),a("Form",[a("FormItem",{attrs:{label:"项目标题"}},[a("Input",{model:{value:t.formItem.teachTitle,callback:function(e){t.$set(t.formItem,"teachTitle",e)},expression:"formItem.teachTitle"}})],1),a("FormItem",{attrs:{label:"项目简介"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.formItem.teachDesc,callback:function(e){t.$set(t.formItem,"teachDesc",e)},expression:"formItem.teachDesc"}})],1),a("FormItem",{attrs:{label:"项目年度"}},[a("DatePicker",{attrs:{type:"year",placeholder:"选择年份"},model:{value:t.formItem.teachYear,callback:function(e){t.$set(t.formItem,"teachYear",e)},expression:"formItem.teachYear"}})],1),a("FormItem",{attrs:{label:"项目级别"}},[a("RadioGroup",{model:{value:t.formItem.teachLevel,callback:function(e){t.$set(t.formItem,"teachLevel",e)},expression:"formItem.teachLevel"}},[a("Radio",{attrs:{label:"1"}},[t._v("院级")]),a("Radio",{attrs:{label:"2"}},[t._v("市级")]),a("Radio",{attrs:{label:"3"}},[t._v("国家级")])],1)],1),a("FormItem",[a("UploadFile",{attrs:{buttonTitle:"上传教改项目申请书"},model:{value:t.formItem.teachApplyFile,callback:function(e){t.$set(t.formItem,"teachApplyFile",e)},expression:"formItem.teachApplyFile"}})],1),a("Button",{attrs:{type:"primary",loading:t.postLoading},on:{click:t.submitApply}},[t._v("提交申请")])],1)],1)},bt=[],gt={components:{UploadFile:pt},data:function(){return{formItem:{teachTitle:"",teachDesc:"",teachYear:"",teachLevel:"1",teachApplyFile:""},postLoading:!1}},methods:{submitApply:function(){var t=this,e=""!=this.formItem.teachTitle&&""!=this.formItem.teachDesc&&""!=this.formItem.teachYear&&""!=this.formItem.teachLevel&&""!=this.formItem.teachApplyFile;if(!e)return this.$Message.error("请填写完整!"),!1;this.$axios.post("/api/teacher/teach",{title:this.formItem.teachTitle,description:this.formItem.teachDesc,level:this.formItem.teachLevel,year:this.formItem.teachYear.getFullYear(),apply_file:this.formItem.teachApplyFile}).then(function(e){t.postLoading=!1,"OK"==e.data.status?(t.$Message.success("教改项目创建成功！"),t.$router.push("/workspace/my-teach-list")):t.$Message.error(e.data.msg)}).catch(function(e){t.postLoading=!1,t.$Message.error("请求出错")})}}},kt=gt,wt=(a("DW56"),Object(n["a"])(kt,_t,bt,!1,null,null,null)),yt=wt.exports,Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Table",{attrs:{border:"",columns:t.col,data:t.list}})},$t=[],Mt={data:function(){return{col:[{title:"项目名",key:"title",render:function(t,e){return t("router-link",{props:{to:"/workspace/teach-detail/"+e.row.id}},e.row.title)}},{title:"项目年度",key:"year",width:100,filters:[{label:"2018",value:2018},{label:"2017",value:2017},{label:"2016",value:2016},{label:"2015及以前",value:0}],filterMultiple:!1,filterMethod:function(t,e){return 0===t?e.year<=2015:e.year===t}},{title:"级别",key:"level",width:100,render:function(t,e){var a;switch(e.row.level){case 1:a="院级";break;case 2:a="市级";break;case 3:a="国家级";break;default:break}return t("strong",a)},filters:[{label:"院级",value:1},{label:"市级",value:2},{label:"国家级",value:3}],filterMultiple:!1,filterMethod:function(t,e){return e.level===t}},{title:"状态",key:"status",filters:[{label:"申请审核中",value:1},{label:"前期进行中",value:2},{label:"中期审核中",value:3},{label:"后期进行中",value:4},{label:"结题审核中",value:5},{label:"已结题",value:6},{label:"已终止",valie:7}],render:function(t,e){var a;switch(e.row.status){case 1:a="申请审核中";break;case 2:a="前期进行中";break;case 3:a="中期审核中";break;case 4:a="后期进行中";break;case 5:a="结题审核中";break;case 6:a="已结题";break;case 7:a="已终止";break;default:break}return t("span",a)},filterMultiple:!1,filterMethod:function(t,e){return e.status===t}}],list:[]}},methods:{fetchTableData:function(){var t=this;this.$axios.get("/api/teacher/teach").then(function(e){t.list=e.data})}},beforeMount:function(){this.fetchTableData()}},xt=Mt,It=Object(n["a"])(xt,Ft,$t,!1,null,null,null),Tt=It.exports,Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Table",{attrs:{border:"",columns:t.col,data:t.list}})},Ct=[],Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",[a("b",[t._v("简介:")]),a("span",{staticClass:"expand-value"},[t._v(t._s(t.row.description))])]),a("Row",[1==t.row.status?a("div",[a("h4",[t._v("申请审核中：")]),a("p",[t._v("申请材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.apply_file))])]),a("Form",[a("FormItem",{attrs:{label:"更改项目级别"}},[a("RadioGroup",{model:{value:t.updateTeachLevel,callback:function(e){t.updateTeachLevel=e},expression:"updateTeachLevel"}},[a("Radio",{attrs:{label:"1"}},[t._v("院级")]),a("Radio",{attrs:{label:"2"}},[t._v("市级")]),a("Radio",{attrs:{label:"3"}},[t._v("国家级")])],1)],1),a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.processRequest(201)}}},[t._v("通过创建申请")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){t.processRequest(204)}}},[t._v("驳回申请")])],1)],1):t._e(),2==t.row.status?a("div",[a("h4",[t._v("前期进行中")]),a("p",[t._v("申请材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.apply_file))])])]):t._e(),3==t.row.status?a("div",[a("h4",[t._v("中期审核中")]),a("p",[t._v("申请材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.apply_file))])]),a("p",[t._v("中期材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.middle_file))])]),a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.processRequest(202)}}},[t._v("通过中期审核")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){t.processRequest(204)}}},[t._v("驳回审核")])],1):t._e(),4==t.row.status?a("div",[a("h4",[t._v("后期进行中")]),a("p",[t._v("申请材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.apply_file))])]),a("p",[t._v("中期材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.middle_file))])])]):t._e(),5==t.row.status?a("div",[a("h4",[t._v("结题审核中")]),a("p",[t._v("申请材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.apply_file))])]),a("p",[t._v("中期材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.middle_file))])]),a("p",[t._v("结题材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.end_file))])]),a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.processRequest(203)}}},[t._v("通过结题审核")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){t.processRequest(204)}}},[t._v("驳回审核")])],1):t._e(),6==t.row.status?a("div",[a("h4",[t._v("已结题")]),a("p",[t._v("申请材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.apply_file))])]),a("p",[t._v("中期材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.middle_file))])]),a("p",[t._v("结题材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.end_file))])])]):t._e(),7==t.row.status?a("div",[a("h4",[t._v("已终止")]),""!=t.row.abort_file?a("p",[t._v("终止材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.abort_file))])]):t._e()]):t._e()])],1)},Dt=[],St={props:{row:Object},data:function(){return{updateTeachLevel:this.row.level+""}},methods:{processRequest:function(t){var e=this;this.$axios.patch("/api/assistant/teach/"+this.row.id+"/update",{operation:t,new_level:this.updateTeachLevel}).then(function(t){"OK"==t.data.status?e.$Message.success("提交成功"):e.$Message.error("提交失败"),e.$emit("processed")}).catch(function(t){e.$Message.error("提交出错")})}}},Ot=St,Et=(a("/LXg"),Object(n["a"])(Ot,Rt,Dt,!1,null,"4caff928",null)),Bt=Et.exports,Ut={data:function(){var t=this;return{col:[{type:"expand",width:50,render:function(e,a){return e(Bt,{props:{row:a.row},on:{processed:t.fetchTableData}})}},{title:"项目名",key:"title"},{title:"项目年度",key:"year",width:100,filters:[{label:"2018",value:2018},{label:"2017",value:2017},{label:"2016",value:2016},{label:"2015及以前",value:0}],filterMultiple:!1,filterMethod:function(t,e){return 0===t?e.year<=2015:e.year===t}},{title:"级别",key:"level",width:100,render:function(t,e){var a;switch(e.row.level){case 1:a="院级";break;case 2:a="市级";break;case 3:a="国家级";break;default:break}return t("strong",a)},filters:[{label:"院级",value:1},{label:"市级",value:2},{label:"国家级",value:3}],filterMultiple:!1,filterMethod:function(t,e){return e.level===t}},{title:"状态",key:"status",filters:[{label:"申请审核中",value:1},{label:"前期进行中",value:2},{label:"中期审核中",value:3},{label:"后期进行中",value:4},{label:"结题审核中",value:5},{label:"已结题",value:6},{label:"已终止",valie:7}],render:function(t,e){var a;switch(e.row.status){case 1:a="申请审核中";break;case 2:a="前期进行中";break;case 3:a="中期审核中";break;case 4:a="后期进行中";break;case 5:a="结题审核中";break;case 6:a="已结题";break;case 7:a="已终止";break;default:break}return t("span",a)},filterMultiple:!1,filterMethod:function(t,e){return e.status===t}}],list:[]}},methods:{fetchTableData:function(){var t=this;this.$axios.get("/api/assistant/teach").then(function(e){t.list=e.data})}},beforeMount:function(){this.fetchTableData()}},jt=Ut,zt=Object(n["a"])(jt,Lt,Ct,!1,null,null,null),Pt=zt.exports,At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("我的教改项目")]),a("Timeline",[a("TimelineItem",[a("p",{staticClass:"time"},[t._v("项目基本信息")]),a("div",{staticClass:"content"},[a("p",[a("b",[t._v("教改题目：")]),t._v(t._s(t.teach.title))]),a("p",[a("b",[t._v("简介：")]),t._v(t._s(t.teach.description))]),a("p",[a("b",[t._v("年度：")]),t._v(t._s(t.teach.year))]),a("p",[a("b",[t._v("级别：")]),t._v(t._s(t.teachLevel))]),a("p",[a("b",[t._v("当前进度：")]),a("Tag",{attrs:{color:"green"}},[t._v(t._s(t.teachStatus))])],1)])]),a("TimelineItem",[a("p",{staticClass:"time"},[t._v("申请管理")]),a("div",{staticClass:"content"},[1==t.teach.status?a("p",[t._v("申请已提交，等待审核中")]):t._e(),t.teach.status>1?a("p",[t._v("申请审核已通过")]):t._e()])]),a("TimelineItem",[a("p",{staticClass:"time"},[t._v("中期管理")]),a("div",{staticClass:"content"},[""!=t.teach.middle_file?a("p",[t._v("已上传：\n                    "),a("a",{attrs:{href:""}},[t._v(t._s(t.teach.middle_file))])]):t._e(),2==t.teach.status?a("Form",[a("FormItem",[a("RadioGroup",{model:{value:t.opMiddle,callback:function(e){t.opMiddle=e},expression:"opMiddle"}},[a("Radio",{attrs:{label:"101"}},[t._v("提交中期报告")]),a("Radio",{attrs:{label:"103"}},[t._v("提交终止申请")])],1)],1),a("FormItem",[a("UploadFile",{attrs:{buttonTitle:"上传相应材料"},model:{value:t.uploadedMiddleFile,callback:function(e){t.uploadedMiddleFile=e},expression:"uploadedMiddleFile"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:t.submitMiddle}},[t._v("提交")])],1)],1):t._e()],1)]),a("TimelineItem",[a("p",{staticClass:"time"},[t._v("结题管理")]),a("div",{staticClass:"content"},[""!=t.teach.end_file?a("p",[t._v("已上传：\n                    "),a("a",{attrs:{href:""}},[t._v(t._s(t.teach.end_file))])]):t._e(),4==t.teach.status?a("Form",[a("FormItem",[a("RadioGroup",{model:{value:t.opEnd,callback:function(e){t.opEnd=e},expression:"opEnd"}},[a("Radio",{attrs:{label:"102"}},[t._v("提交结题材料")]),a("Radio",{attrs:{label:"103"}},[t._v("提交终止申请")])],1)],1),a("FormItem",[a("UploadFile",{attrs:{buttonTitle:"上传相应材料"},model:{value:t.uploadedEndFile,callback:function(e){t.uploadedEndFile=e},expression:"uploadedEndFile"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:t.submitEnd}},[t._v("提交")])],1)],1):t._e()],1)])],1)],1)},Yt=[],Kt={components:{UploadFile:pt},data:function(){return{teachId:this.$route.params.id,teach:Object,opMiddle:"101",uploadedMiddleFile:"",opEnd:"102",uploadedEndFile:""}},methods:{fetchData:function(){var t=this;this.$axios.get("/api/teacher/teach/"+this.teachId).then(function(e){"OK"==e.data.status?t.teach=e.data.teach:t.$Message.error(e.data.msg)}).catch(function(t){})},submitMiddle:function(){var t=this,e=""!=this.uploadedMiddleFile&&""!=this.opMiddle;e?this.$axios.patch("/api/teacher/teach/"+this.teachId+"/update",{operation:parseInt(this.opMiddle),middle_file:this.uploadedMiddleFile}).then(function(e){"OK"==e.data.status?t.$Message.success("提交成功"):t.$Message.error("提交失败"),t.fetchData()}).catch(function(e){t.$Message.error("提交出错")}):this.$Message.error("提交内容不能为空")},submitEnd:function(){var t=this,e=""!=this.uploadedEndFile&&""!=this.opEnd;e?this.$axios.patch("/api/teacher/teach/"+this.teachId+"/update",{operation:parseInt(this.opEnd),end_file:this.uploadedEndFile}).then(function(e){"OK"==e.data.status?t.$Message.success("提交成功"):t.$Message.error("提交失败"),t.fetchData()}).catch(function(e){t.$Message.error("提交出错")}):this.$Message.error("提交内容不能为空")}},computed:{teachLevel:function(){return 1==this.teach.level?"院级":2==this.teach.level?"市级":"国家级"},teachStatus:function(){var t="";switch(this.teach.status){case 1:t="申请审核中";break;case 2:t="前期进行中";break;case 3:t="中期审核中";break;case 4:t="后期进行中";break;case 5:t="结题审核中";break;case 6:t="已结题";break;case 7:t="已终止";break;default:break}return t}},beforeMount:function(){this.fetchData()}},Gt=Kt,qt=(a("pshE"),Object(n["a"])(Gt,At,Yt,!1,null,null,null)),Ht=qt.exports,Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("毕业项目申请")]),a("Form",[a("FormItem",{attrs:{label:"毕设题目"}},[a("Input",{model:{value:t.graduationTitle,callback:function(e){t.graduationTitle=e},expression:"graduationTitle"}})],1),a("FormItem",{attrs:{label:"毕设简介"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.graduationDesc,callback:function(e){t.graduationDesc=e},expression:"graduationDesc"}})],1),a("FormItem",{attrs:{label:"毕业年"}},[a("DatePicker",{attrs:{type:"year",placeholder:"选择年份"},model:{value:t.graduationYear,callback:function(e){t.graduationYear=e},expression:"graduationYear"}})],1),a("FormItem",{attrs:{label:"指导老师"}},[a("Select",{attrs:{filterable:""},model:{value:t.graduationTeacher,callback:function(e){t.graduationTeacher=e},expression:"graduationTeacher"}},t._l(t.teacherList,function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}))],1),a("Button",{attrs:{type:"primary",loading:t.postLoading},on:{click:t.submitApply}},[t._v("提交申请")])],1)],1)},Jt=[],Vt={data:function(){return{graduationTitle:"",graduationYear:"",graduationDesc:"",graduationTeacher:null,teacherList:[2],postLoading:!1,hasGraduation:!1}},methods:{submitApply:function(t){var e=this,a=""!=this.graduationTitle&&""!=this.graduationYear&&""!=this.graduationDesc&&""!=this.graduationTeacher;a?(this.postLoading=!0,this.$axios.post("/api/student/graduation",{title:this.graduationTitle,description:this.graduationDesc,year:this.graduationYear.getFullYear(),teacher:this.graduationTeacher}).then(function(t){e.postLoading=!1,"OK"==t.data.status?(e.$Message.success("毕业项目创建成功！"),e.$router.push("/workspace/graduation-manage")):e.$Message.error(t.data.msg)}).catch(function(t){e.postLoading=!1,e.$Message.error("请求出错")})):this.$Message.error("请填写完整!")}},beforeMount:function(){var t=this;this.$axios.get("/api/student/graduation").then(function(e){0!=Object.keys(e.data).length&&(t.hasGraduation=!0,t.$Message.warning("您已经创建过毕业项目"),t.$router.push("/workspace/graduation-manage"))}).catch(function(t){console.error(t)})}},Wt=Vt,Qt=(a("g040"),Object(n["a"])(Wt,Zt,Jt,!1,null,null,null)),Nt=Qt.exports,Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("我的毕业项目管理")]),t.hasGraduation?a("Timeline",[a("TimelineItem",[a("p",{staticClass:"time"},[t._v("项目基本信息")]),a("div",{staticClass:"content"},[a("p",[a("b",[t._v("毕设题目：")]),t._v(t._s(t.graduation.title))]),a("p",[a("b",[t._v("简介：")]),t._v(t._s(t.graduation.description))]),a("p",[a("b",[t._v("毕业年：")]),t._v(t._s(t.graduation.year))]),a("p",[a("b",[t._v("指导教师：")]),t._v(t._s(t.graduation.teacher))]),a("p",[a("b",[t._v("当前进度：")]),a("Tag",{attrs:{color:"green"}},[t._v(t._s(t.graduationStatus))])],1)])]),a("TimelineItem",[a("p",{staticClass:"time"},[t._v("项目申请")]),a("div",{staticClass:"content"},[t.graduation.status>1&&""!=t.graduation.task_file?a("p",[t._v("任务书：\n                    "),a("a",{attrs:{href:""}},[t._v(t._s(t.graduation.task_file))])]):a("p",[t._v("等待老师审核上传任务书")])])]),a("TimelineItem",[a("p",{staticClass:"time"},[t._v("开题管理")]),a("div",{staticClass:"content"},[""!=t.graduation.start_file?a("p",[t._v("已上传：\n                    "),a("a",{attrs:{href:""}},[t._v(t._s(t.graduation.start_file))])]):t._e(),2==t.graduation.status?a("Form",[a("FormItem",[a("UploadFile",{attrs:{buttonTitle:"上传开题报告"},model:{value:t.startFile,callback:function(e){t.startFile=e},expression:"startFile"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:t.submitStart}},[t._v("提交")])],1)],1):t._e()],1)]),a("TimelineItem",[a("p",{staticClass:"time"},[t._v("中期管理")]),a("div",{staticClass:"content"},[t.graduation.status>3&""!=t.graduation.middle_file?a("p",[t._v("已上传：\n                    "),a("a",{attrs:{href:""}},[t._v(t._s(t.graduation.middle_file))])]):t._e(),3==t.graduation.status?a("Form",[a("FormItem",[a("UploadFile",{attrs:{buttonTitle:"上传相应材料"},model:{value:t.middleFile,callback:function(e){t.middleFile=e},expression:"middleFile"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:t.submitMiddle}},[t._v("提交")])],1)],1):t._e()],1)]),a("TimelineItem",[a("p",{staticClass:"time"},[t._v("结题管理")]),a("div",{staticClass:"content"},[5==t.graduation.status&&""!=t.graduation.end_file?a("p",[t._v("已上传：\n                    "),a("a",{attrs:{href:""}},[t._v(t._s(t.graduation.end_file))])]):t._e(),4==t.graduation.status?a("Form",[a("FormItem",[a("UploadFile",{attrs:{buttonTitle:"上传结题材料"},model:{value:t.endFile,callback:function(e){t.endFile=e},expression:"endFile"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:t.submitEnd}},[t._v("提交")])],1)],1):t._e()],1)])],1):a("div",[a("p",[t._v("还没有毕业项目")]),a("router-link",{attrs:{to:"/workspace/graduation-apply"}},[a("Button",[t._v("点击创建")])],1)],1)],1)},te=[],ee={components:{UploadFile:pt},data:function(){return{graduation:{title:"",description:"",year:"",status:1},startFile:"",middleFile:"",endFile:"",hasGraduation:!1}},methods:{fetchData:function(){var t=this;this.$axios.get("/api/student/graduation").then(function(e){0!=Object.keys(e.data).length&&(t.hasGraduation=!0),t.graduation=e.data}).catch(function(t){console.error(t)})},submitStart:function(){var t=this;""==this.startFile?this.$Message.error("提交内容不能为空"):this.$axios.patch("/api/student/graduation/update",{operation:101,start_file:this.startFile}).then(function(e){"OK"==e.data.status?t.$Message.success("提交成功"):t.$Message.error("提交失败"),t.fetchData()}).catch(function(e){t.$Message.error("提交出错")})},submitMiddle:function(){var t=this;""==this.middleFile?this.$Message.error("提交内容不能为空"):this.$axios.patch("/api/student/graduation/update",{operation:102,middle_file:this.middleFile}).then(function(e){"OK"==e.data.status?t.$Message.success("提交成功"):t.$Message.error("提交失败"),t.fetchData()}).catch(function(e){t.$Message.error("提交出错")})},submitEnd:function(){var t=this;""==this.endFile?this.$Message.error("提交内容不能为空"):this.$axios.patch("/api/student/graduation/update",{operation:103,end_file:this.endFile}).then(function(e){"OK"==e.data.status?t.$Message.success("提交成功"):t.$Message.error("提交失败"),t.fetchData()}).catch(function(e){t.$Message.error("提交出错")})}},computed:{graduationStatus:function(){var t="";switch(this.graduation.status){case 1:t="等待审核中";break;case 2:t="等待开题中";break;case 3:t="前期进行中";break;case 4:t="后期进行中";break;case 5:t="已结题";break;default:break}return t}},beforeMount:function(){this.fetchData()}},ae=ee,se=(a("k8FL"),Object(n["a"])(ae,Xt,te,!1,null,null,null)),re=se.exports,ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Table",{attrs:{border:"",columns:t.col,data:t.list}})},oe=[],le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",[a("b",[t._v("简介:")]),a("span",{staticClass:"expand-value"},[t._v(t._s(t.row.description))])]),a("Row",[1==t.row.status?a("div",[a("h4",[t._v("申请审核中：")]),a("UploadFile",{attrs:{buttonTitle:"上传任务书"},model:{value:t.uploadedTaskFile,callback:function(e){t.uploadedTaskFile=e},expression:"uploadedTaskFile"}}),a("Button",{attrs:{type:"primary",size:"small"},on:{click:t.submitTaskFile}},[t._v("提交")])],1):t._e(),2==t.row.status?a("div",[a("h4",[t._v("等待开题中：")]),a("p",[t._v("任务书：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.task_file))])])]):t._e(),3==t.row.status?a("div",[a("h4",[t._v("前期进行中：")]),a("p",[t._v("任务书：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.task_file))])]),a("p",[t._v("开题报告：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.start_file))])])]):t._e(),4==t.row.status?a("div",[a("h4",[t._v("后期进行中：")]),a("p",[t._v("任务书：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.task_file))])]),a("p",[t._v("开题报告：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.start_file))])]),a("p",[t._v("中期报告：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.middle_file))])])]):t._e(),5==t.row.status?a("div",[a("h4",[t._v("已结题：")]),a("p",[t._v("任务书：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.task_file))])]),a("p",[t._v("开题报告：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.start_file))])]),a("p",[t._v("中期报告：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.middle_file))])]),a("p",[t._v("结题材料：\n                "),a("a",{attrs:{href:""}},[t._v(t._s(t.row.end_file))])])]):t._e()])],1)},ne=[],ce={components:{UploadFile:pt},props:{row:Object},data:function(){return{uploadedTaskFile:""}},methods:{submitTaskFile:function(){var t=this;this.$axios.patch("/api/teacher/graduation/"+this.row.id+"/update",{operation:201,task_file:this.uploadedTaskFile}).then(function(e){"OK"==e.data.status?t.$Message.success("提交成功"):t.$Message.error("提交失败"),t.$emit("processed")}).catch(function(e){t.$Message.error("提交出错")})}}},ue=ce,de=(a("BPTm"),Object(n["a"])(ue,le,ne,!1,null,null,null)),pe=de.exports,he={data:function(){var t=this;return{col:[{type:"expand",width:50,render:function(e,a){return e(pe,{props:{row:a.row},on:{processed:t.fetchTableData}})}},{title:"项目名",key:"title"},{title:"学生",key:"student"},{title:"毕业年",key:"year",width:100,filters:[{label:"2018",value:2018},{label:"2017",value:2017},{label:"2016",value:2016},{label:"2015及以前",value:0}],filterMultiple:!1,filterMethod:function(t,e){return 0===t?e.year<=2015:e.year===t}},{title:"状态",key:"status",filters:[{label:"申请审核中",value:1},{label:"等待开题中",value:2},{label:"前期进行中",value:3},{label:"后期进行中",value:4},{label:"已结题",value:5}],render:function(t,e){var a;switch(e.row.status){case 1:a="申请审核中";break;case 2:a="等待开题中";break;case 3:a="前期进行中";break;case 4:a="后期进行中";break;case 5:a="已结题";break;default:break}return t("span",a)},filterMultiple:!1,filterMethod:function(t,e){return e.status===t}}],list:[]}},methods:{fetchTableData:function(){var t=this;this.$axios.get("/api/teacher/graduation").then(function(e){t.list=e.data})}},beforeMount:function(){this.fetchTableData()}},fe=he,ve=Object(n["a"])(fe,ie,oe,!1,null,null,null),me=ve.exports;s["default"].use(d["a"]);var _e=new d["a"]({routes:[{path:"/",name:"index",redirect:"/login"},{path:"/login",name:"login",component:_},{path:"/workspace",name:"workspace",component:F,children:[{path:"",component:L},{path:"view-course",component:E},{path:"srtp-apply",component:H},{path:"srtp-list",component:rt},{path:"srtp-detail",component:mt},{path:"teach-apply",component:yt},{path:"teach-detail/:id",component:Ht},{path:"my-teach-list",component:Tt},{path:"all-teach-list",component:Pt},{path:"graduation-apply",component:Nt},{path:"graduation-manage",component:re},{path:"graduation-list",component:me}]}]}),be=a("vDqi"),ge=a.n(be),ke=a("4GmL"),we=a.n(ke);a("3K29"),a("GC3I");s["default"].prototype.$axios=ge.a,localStorage.token&&(s["default"].prototype.$axios.defaults.headers.common["Authorization"]="Bearer"+localStorage.token),s["default"].use(we.a),s["default"].config.productionTip=!1,new s["default"]({router:_e,render:function(t){return t(u)}}).$mount("#app")},YPLU:function(t,e,a){},ZL7j:function(t,e,a){"use strict";var s=a("EDI0"),r=a.n(s);r.a},ZjHd:function(t,e,a){"use strict";var s=a("YPLU"),r=a.n(s);r.a},g040:function(t,e,a){"use strict";var s=a("66K1"),r=a.n(s);r.a},k8FL:function(t,e,a){"use strict";var s=a("PEzW"),r=a.n(s);r.a},lqBx:function(t,e,a){"use strict";var s=a("6mT4"),r=a.n(s);r.a},n9Gu:function(t,e,a){},o0US:function(t,e,a){},pshE:function(t,e,a){"use strict";var s=a("o0US"),r=a.n(s);r.a},qfvz:function(t,e,a){},vbe9:function(t,e,a){},wP6D:function(t,e,a){"use strict";var s=a("n9Gu"),r=a.n(s);r.a},wZDF:function(t,e,a){},z5KE:function(t,e,a){},zVQ9:function(t,e,a){"use strict";var s=a("wZDF"),r=a.n(s);r.a}});
//# sourceMappingURL=app.c792c7a5.js.map